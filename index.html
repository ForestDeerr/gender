<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ì–µ–Ω–¥–µ—Ä –¢–æ—Ç–∞–ª–∏–∑–∞—Ç–æ—Ä</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #ffe0f0, #e0f0ff);
      margin: 0;
      padding: 2rem;
      color: #444;
    }

    h1 {
      text-align: center;
      color: #d63384;
    }

    form {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 2rem;
    }

    input, select, button {
      padding: 0.5rem 1rem;
      font-size: 1rem;
      border-radius: 8px;
      border: 1px solid #ccc;
    }

    button {
      background-color: #d63384;
      color: white;
      border: none;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    button:hover {
      background-color: #c2186a;
    }

    .bet-list {
      max-width: 600px;
      margin: auto;
    }

    .bet-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #fff0f5;
      border: 1px solid #ffc0cb;
      padding: 0.8rem 1rem;
      border-radius: 10px;
      margin-bottom: 0.5rem;
    }

    .bet-item span {
      font-weight: bold;
    }

    .delete-btn {
      background-color: #74c0fc;
      color: #fff;
      border: none;
      padding: 0.3rem 0.6rem;
      border-radius: 6px;
      cursor: pointer;
    }

    .delete-btn:hover {
      background-color: #339af0;
    }

    .bank-info {
      text-align: center;
      margin-top: 2rem;
      font-size: 1.2rem;
      color: #d63384;
    }
  </style>
</head>
<body>
  <h1>–ì–µ–Ω–¥–µ—Ä –¢–æ—Ç–∞–ª–∏–∑–∞—Ç–æ—Ä</h1>

  <form id="bet-form">
    <input type="text" id="name" placeholder="–í–∞—à–µ –∏–º—è" required>
    <select id="choice">
      <option value="–º">–ú–∞–ª—å—á–∏–∫</option>
      <option value="–∂">–î–µ–≤–æ—á–∫–∞</option>
      <option value="–¥–≤–æ–π–Ω—è">–î–≤–æ–π–Ω—è</option>
    </select>
    <button type="submit">–°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É (5 BYN)</button>
  </form>

  <div class="bet-list" id="bet-list"></div>

  <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–Ω–∫–µ –∏ –ø—Ä–∏–∑–æ–≤–æ–º —Ñ–æ–Ω–¥–µ -->
  <div class="bank-info">
    <p>–û–±—â–∏–π –±–∞–Ω–∫: <span id="total-bank">0 BYN</span></p>
    <p>–ü—Ä–∏–∑–æ–≤–æ–π —Ñ–æ–Ω–¥ (50%): <span id="prize-fund">0 BYN</span></p>
  </div>

<!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ -->
<div style="text-align: center; margin-top: 1rem;">
    <button id="rules-btn">üìã –ü—Ä–∞–≤–∏–ª–∞</button>
  </div>
  
  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
  <div id="rules-modal" style="display:none; position:fixed; flex-direction: column; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); z-index:1000; justify-content:center; align-items:center;">
    
    <div style="background:white; overflow: auto; padding:2rem; border-radius:10px; max-width:500px; text-align:left; color:#444; position:relative;">
      <button id="close-rules" style="display: flex
      ;
          position: absolute;
          top: 10px;
          right: 10px;
          background: #d63384;
          color: white;
          border: none;
          border-radius: 50%;
          width: 30px;
          height: 30px;
          cursor: pointer;
          justify-content: center;
          flex-direction: row;
          align-items: center;">‚úï</button>
      <h2 style="color:#d63384;">üìå –°—É—Ç—å:</h2>
      <p>–£–≥–∞–¥–∞–π –ø–æ–ª –±—É–¥—É—â–µ–≥–æ —Ä–µ–±—ë–Ω–∫–∞ (–º–∞–ª—å—á–∏–∫, –¥–µ–≤–æ—á–∫–∞ –∏–ª–∏ –¥–≤–æ–π–Ω—è) –∏ –ø–æ–ª—É—á–∏ —á–∞—Å—Ç—å –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–≥–æ –±–∞–Ω–∫–∞!</p>
  
      <h2 style="color:#d63384;">üí∏ –°—Ç–∞–≤–∫–∏:</h2>
      <p>–°—Ç–æ–∏–º–æ—Å—Ç—å –æ–¥–Ω–æ–π —Å—Ç–∞–≤–∫–∏ ‚Äî <strong>5 —Ä—É–±–ª–µ–π</strong>.</p>
  
      <h2 style="color:#d63384;">–î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:</h2>
      <ul>
        <li>üë¶ –ú–∞–ª—å—á–∏–∫</li>
        <li>üëß –î–µ–≤–æ—á–∫–∞</li>
        <li>üë∂ –î–≤–æ–π–Ω—è</li>
      </ul>
  
      <h2 style="color:#d63384;">üèÜ –í—ã–∏–≥—Ä—ã—à:</h2>
      <p>50% –æ—Ç –æ–±—â–µ–≥–æ –±–∞–Ω–∫–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –º–µ–∂–¥—É –ø–æ–±–µ–¥–∏—Ç–µ–ª—è–º–∏.</p>
      <p>–ï—Å–ª–∏ –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π –Ω–µ—Å–∫–æ–ª—å–∫–æ ‚Äî –≤—ã–∏–≥—Ä—ã—à –¥–µ–ª–∏—Ç—Å—è –ø–æ—Ä–æ–≤–Ω—É, –Ω–æ:</p>
      <p><em>–ö–∞–∂–¥–∞—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –¥–æ–ª—é –≤—ã–∏–≥—Ä—ã—à–∞!</em></p>
      <p><strong>–ü—Ä–∏–º–µ—Ä:</strong> –£ –æ–¥–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ 2 —Å—Ç–∞–≤–∫–∏, —É –¥—Ä—É–≥–æ–≥–æ 1 ‚Äî –ø–µ—Ä–≤—ã–π –ø–æ–ª—É—á–∏—Ç –≤–¥–≤–æ–µ –±–æ–ª—å—à–µ.</p>
  
      <h2 style="color:#d63384;">üóì –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:</h2>
      <p>–û–±—ä—è–≤–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –≤ –ø–∞–º—è—Ç–Ω—ã–π –¥–ª—è –Ω–∞—Å –¥–µ–Ω—å ‚Äî <strong>–¥–µ–Ω—å –Ω–∞—à–µ–π —Å–≤–∞–¥—å–±—ã üë∞ü§µ ‚Äî 22 –∏—é–Ω—è 2025</strong></p>
  
      <h2 style="color:#d63384;">‚úÖ –ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á—ë—Ç–∞:</h2>
      <p>–í –∏–≥—Ä–µ —É—á–∞—Å—Ç–≤—É—é—Ç 10 —á–µ–ª–æ–≤–µ–∫, —Å–¥–µ–ª–∞–Ω–æ 20 —Å—Ç–∞–≤–æ–∫ = –±–∞–Ω–∫ 100 —Ä—É–±.</p>
      <p>–ü–æ–±–µ–¥–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –≤—ã–±—Ä–∞–ª–∏ 4 —Å—Ç–∞–≤–∫–∏ (—É 3-—Ö —Ä–∞–∑–Ω—ã—Ö —á–µ–ª–æ–≤–µ–∫: A ‚Äî 2 —Å—Ç–∞–≤–∫–∏, B ‚Äî 1 —Å—Ç–∞–≤–∫–∞, C ‚Äî 1 —Å—Ç–∞–≤–∫–∞).</p>
      <p>50 —Ä—É–± –¥–µ–ª—è—Ç—Å—è –ø–æ –¥–æ–ª—è–º:</p>
      <ul>
        <li>A ‚Äî 25 —Ä—É–±</li>
        <li>B ‚Äî 12.5 —Ä—É–±</li>
        <li>C ‚Äî 12.5 —Ä—É–±</li>
      </ul>
    </div>
  </div>



  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/11.6.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.6.0/firebase-database-compat.js"></script>

  <script>
    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyBrvZ9tZD5M-n3X-2lJXyV6C_qK4w4TLMQ",
      authDomain: "forest-8fcf9.firebaseapp.com",
      projectId: "forest-8fcf9",
      storageBucket: "forest-8fcf9.appspot.com",
      messagingSenderId: "435012597352",
      appId: "1:435012597352:web:e5a5534e0646891194addd",
      measurementId: "G-5GQHJ7NJBF",
      databaseURL: "https://forest-8fcf9-default-rtdb.firebaseio.com"  // –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π URL
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const form = document.getElementById('bet-form');
    const list = document.getElementById('bet-list');
    const totalBankElement = document.getElementById('total-bank');
    const prizeFundElement = document.getElementById('prize-fund');

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const name = document.getElementById('name').value.trim();
      const choice = document.getElementById('choice').value;
      if (!name) return;

      const bet = { name, choice, amount: 5 };  // –°—Ç–∞–≤–∫–∞ 5‚ÇΩ
      db.ref("bets").push(bet).then(() => {
        form.reset();
        loadBets();
      });
    });

    function loadBets() {
      db.ref("bets").once("value").then(snapshot => {
        const data = snapshot.val() || {};
        const grouped = {};
        let totalBank = 0;

        Object.entries(data).forEach(([id, bet]) => {
          console.log(`Bet loaded: ${bet.name} ‚Üí ${bet.choice} (5‚ÇΩ)`);  // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–≤–æ–∫
          const key = bet.name + "-" + bet.choice;
          if (!grouped[key]) {
            grouped[key] = { ...bet, count: 0, ids: [] };
          }
          grouped[key].count += 1;
          grouped[key].ids.push(id);
          totalBank += bet.amount;
        });

        // –õ–æ–≥–∏—Ä—É–µ–º –æ–±—â–∏–π –±–∞–Ω–∫
        console.log(`Total bank: ${totalBank}`);

        // –ï—Å–ª–∏ –µ—Å—Ç—å —Å—Ç–∞–≤–∫–∏, —Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º –∏—Ö
        list.replaceChildren();
        Object.values(grouped).forEach(bet => {
          const div = document.createElement('div');
          div.className = 'bet-item';
          div.innerHTML = `
            <span>${bet.name} ‚Üí ${bet.choice} √ó ${bet.count}</span>
            <button class="delete-btn">–£–¥–∞–ª–∏—Ç—å</button>
          `;
          div.querySelector('button').addEventListener('click', () => {
            const updates = {};
            bet.ids.forEach(id => updates[id] = null);
            db.ref("bets").update(updates).then(loadBets);
          });
          list.appendChild(div);
        });

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–∞–Ω–∫–µ –∏ –ø—Ä–∏–∑–æ–≤–æ–º —Ñ–æ–Ω–¥–µ
        totalBankElement.textContent = `${totalBank} BYN`;
        const prizeFund = totalBank * 0.5;
        prizeFundElement.textContent = `${prizeFund} BYN`;
      }).catch(error => {
        console.error('Error loading bets:', error);
      });
    }


    
    loadBets();

    // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏
document.getElementById('rules-btn').addEventListener('click', () => {
  document.getElementById('rules-modal').style.display = 'flex';
});

document.getElementById('close-rules').addEventListener('click', () => {
  document.getElementById('rules-modal').style.display = 'none';
});

document.getElementById('rules-modal').addEventListener('click', (e) => {
  if (e.target === document.getElementById('rules-modal')) {
    document.getElementById('rules-modal').style.display = 'none';
  }
});
  </script>
</body>
</html>
